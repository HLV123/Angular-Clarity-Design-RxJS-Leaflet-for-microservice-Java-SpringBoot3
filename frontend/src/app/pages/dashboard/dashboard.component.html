<div class="page-header">
  <div>
    <h2>Dashboard T·ªïng quan</h2>
    <p>Gi√°m s√°t th·ªùi gian th·ª±c ¬∑ {{ currentTime() }}</p>
  </div>
  <div class="live-indicator green"><span class="live-dot"></span> WebSocket STOMP Connected</div>
</div>

<div class="stats-grid">
  @for (s of stats; track s.label) {
    <div class="stat-card" [style.border-left]="'4px solid ' + s.color">
      <i [class]="'fa-solid ' + s.icon + ' stat-bg-icon'" [style.color]="s.color"></i>
      <div class="stat-label">{{ s.label }}</div>
      <div class="stat-value" [style.color]="s.color">{{ s.value }}</div>
      <div class="stat-change" [class.positive]="s.positive">
        @if (s.positive) { <i class="fa-solid fa-arrow-trend-up"></i> }
        {{ s.change }}
      </div>
    </div>
  }
</div>

<div class="charts-row">
  <div class="card chart-card wide">
    <div class="card-header">
      <div class="header-left">
        <i class="fa-solid fa-wave-square" style="color:#1574ea"></i>
        <span>Gi√°m s√°t ICU Realtime</span>
      </div>
      <div class="live-indicator red"><span class="live-dot"></span> Live (WebSocket/STOMP)</div>
    </div>
    <div class="card-body chart-body">
      <canvas #vitalsCanvas></canvas>
    </div>
  </div>
  <div class="card chart-card">
    <div class="card-header">
      <div class="header-left">
        <i class="fa-solid fa-chart-pie" style="color:#8b5cf6"></i>
        <span>Ph√¢n b·ªï Triage</span>
      </div>
    </div>
    <div class="card-body chart-body">
      <canvas #triageCanvas></canvas>
    </div>
  </div>
</div>

<div class="bottom-row">
  <div class="card">
    <div class="card-header">
      <div class="header-left">
        <i class="fa-solid fa-triangle-exclamation" style="color:#f59e0b"></i>
        <span>C·∫£nh b√°o g·∫ßn ƒë√¢y</span>
      </div>
      <a routerLink="/alerts" class="view-all">Xem t·∫•t c·∫£ ‚Üí</a>
    </div>
    <div class="alert-list">
      @for (a of alerts(); track a.id) {
        <div class="alert-item">
          <span class="badge" [class]="getLevelClass(a.level)">{{ a.level }}</span>
          <div class="alert-content">
            <div class="alert-msg">{{ a.message }}</div>
            <div class="alert-meta">{{ a.timestamp | date:'HH:mm dd/MM' }} ¬∑ {{ a.type }}</div>
          </div>
        </div>
      }
    </div>
  </div>
  <a routerLink="/knowledge-graph" class="card graph-card">
    <div class="graph-bg"></div>
    <div class="graph-content">
      <i class="fa-solid fa-circle-nodes graph-icon"></i>
      <h3>Health Knowledge Graph</h3>
      <p>Neo4j ¬∑ Quan h·ªá B·ªánh l√Ω - Tri·ªáu ch·ª©ng - Thu·ªëc</p>
      <div class="graph-tags">
        <span class="graph-tag disease">üß¨ Disease</span>
        <span class="graph-tag drug">üíä Drug</span>
        <span class="graph-tag symptom">‚ö†Ô∏è Symptom</span>
      </div>
    </div>
  </a>
</div>
